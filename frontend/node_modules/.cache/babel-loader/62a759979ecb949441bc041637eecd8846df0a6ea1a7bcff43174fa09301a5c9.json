{"ast":null,"code":"import _toConsumableArray from\"C:/Users/DRAGOS/Desktop/E-Commerce/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import{Link,useParams,useLocation,useNavigate}from'react-router-dom';import{Row,Col,ListGroup,Image,Form,Button,Card}from'react-bootstrap';import{addToCart,removeFromCart}from'../actions/cartActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CartScreen=function CartScreen(){var match=useParams();var navigate=useNavigate();var productId=match.id;var location=useLocation();var qty=location.search?Number(location.search.split('=')[1]):1;var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;useEffect(function(){if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);var removeFromCartHandler=function removeFromCartHandler(id){dispatch(removeFromCart(id));};var checkoutHandler=function checkoutHandler(){navigate('/login',{state:{redirect:'/shipping'}});};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Cos de cumparaturi\"}),cartItems.length===0?/*#__PURE__*/_jsxs(Message,{children:[' ',\"Cosul de cumparaturi este gol!\",' ',/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Continua cumparaturile\"})]}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),style:{textDecoration:'none'},children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:2,children:[item.price*4,\" RON\"]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",className:\"form-select-sm\",value:item.qty,size:\"5\",onChange:function onChange(e){return dispatch(addToCart(item.product,Number(e.target.value)));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"light\",onClick:function onClick(){return removeFromCartHandler(item.product);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item.product);})})]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Subtotal (\",cartItems.reduce(function(accumulator,item){return accumulator+item.qty;},0),\") articole\"]}),cartItems.reduce(function(acc,item){return acc+item.qty*item.price*4;},0).toFixed(2),\"RON\"]}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cartItems.length===0,onClick:checkoutHandler,children:\"Finalizeaza cumparaturile\"})})]})})})]});};export default CartScreen;","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","Message","Link","useParams","useLocation","useNavigate","Row","Col","ListGroup","Image","Form","Button","Card","addToCart","removeFromCart","jsx","_jsx","jsxs","_jsxs","CartScreen","match","navigate","productId","id","location","qty","search","Number","split","dispatch","cart","state","cartItems","removeFromCartHandler","checkoutHandler","redirect","children","md","length","to","variant","map","item","Item","src","image","alt","name","fluid","rounded","concat","product","style","textDecoration","price","Control","as","className","value","size","onChange","e","target","_toConsumableArray","Array","countInStock","keys","x","type","onClick","reduce","accumulator","acc","toFixed","disabled"],"sources":["C:/Users/DRAGOS/Desktop/E-Commerce/frontend/src/screens/CartScreen.js"],"sourcesContent":["import React, {useEffect} from 'react'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport Message from '../components/Message'\r\nimport {Link, useParams, useLocation, useNavigate} from 'react-router-dom'\r\nimport {Row, Col, ListGroup, Image, Form, Button, Card} from 'react-bootstrap'\r\nimport {addToCart, removeFromCart} from '../actions/cartActions'\r\n\r\nconst CartScreen = () => {\r\n  const match = useParams()\r\n  const navigate = useNavigate()\r\n\r\n  const productId = match.id\r\n\r\n  const location = useLocation()\r\n  const qty = location.search ? Number(location.search.split('=')[1]) : 1\r\n  \r\n\r\n  const dispatch = useDispatch()\r\n\r\n  const cart = useSelector((state) => state.cart)\r\n\r\n  const {cartItems} = cart\r\n\r\n  useEffect(() => {\r\n    if (productId) {\r\n      dispatch(addToCart(productId, qty))\r\n    }\r\n  }, [dispatch, productId, qty])\r\n\r\n  const removeFromCartHandler = (id) => {\r\n    dispatch(removeFromCart(id))\r\n  }\r\n\r\n  const checkoutHandler = () => {\r\n    navigate('/login', {state: {redirect: '/shipping'}})\r\n  }\r\n\r\n  return (\r\n    <Row>\r\n      <Col md={8}>\r\n        <h1>Cos de cumparaturi</h1>\r\n        {cartItems.length === 0 ? (\r\n          <Message>\r\n            {' '}\r\n            Cosul de cumparaturi este gol!{' '}\r\n            <Link to='/'>Continua cumparaturile</Link>\r\n          </Message>\r\n        ) : (\r\n          <ListGroup variant='flush'>\r\n            {cartItems.map((item) => (\r\n              <ListGroup.Item key={item.product}>\r\n                <Row>\r\n                  <Col md={2}>\r\n                    <Image src={item.image} alt={item.name} fluid rounded />\r\n                  </Col>\r\n\r\n                  <Col md={3}>\r\n                    <Link\r\n                      to={`/product/${item.product}`}\r\n                      style={{textDecoration: 'none'}}\r\n                    >\r\n                      {item.name}\r\n                    </Link>\r\n                  </Col>\r\n\r\n                  <Col md={2}>{item.price * 4} RON</Col>\r\n\r\n                  <Col md={2}>\r\n                    <Form.Control\r\n                      as='select'\r\n                      className='form-select-sm'\r\n                      value={item.qty}\r\n                      size='5'\r\n                      onChange={(e) =>\r\n                        dispatch(\r\n                          addToCart(item.product, Number(e.target.value))\r\n                        )\r\n                      }\r\n                    >\r\n                      {[...Array(item.countInStock).keys()].map((x) => (\r\n                        <option key={x + 1} value={x + 1}>\r\n                          {x + 1}\r\n                        </option>\r\n                      ))}\r\n                    </Form.Control>\r\n                  </Col>\r\n\r\n                  <Col md={2}>\r\n                    <Button\r\n                      type='button'\r\n                      variant='light'\r\n                      onClick={() => removeFromCartHandler(item.product)}\r\n                    >\r\n                      <i className='fas fa-trash'></i>\r\n                    </Button>\r\n                  </Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n            ))}\r\n          </ListGroup>\r\n        )}\r\n      </Col>\r\n\r\n      <Col md={4}>\r\n        <Card>\r\n          <ListGroup variant='flush'>\r\n            <ListGroup.Item>\r\n              <h2>\r\n                Subtotal (\r\n                {cartItems.reduce(\r\n                  (accumulator, item) => accumulator + item.qty,\r\n                  0\r\n                )}\r\n                ) articole\r\n              </h2>\r\n              {cartItems\r\n                .reduce((acc, item) => acc + item.qty * item.price * 4, 0)\r\n                .toFixed(2)}\r\n              RON\r\n            </ListGroup.Item>\r\n\r\n            <ListGroup.Item>\r\n              <Button\r\n                type='button'\r\n                className='btn-block'\r\n                disabled={cartItems.length === 0}\r\n                onClick={checkoutHandler}\r\n              >\r\n                Finalizeaza cumparaturile\r\n              </Button>\r\n            </ListGroup.Item>\r\n          </ListGroup>\r\n        </Card>\r\n      </Col>\r\n    </Row>\r\n  )\r\n}\r\n\r\nexport default CartScreen\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}